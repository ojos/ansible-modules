---
  openresty_user: nginx
  openresty_group: nginx
  openresty_version: 1.11.2.5
  openresty_work_directory: "{{ project_directory }}/work"
  openresty_dependent_packages:
    - openssl-devel
    - pcre-devel
    - zlib-devel
    - readline-devel
    - logrotate
  openresty_make_bin_file: /usr/bin/make
  openresty_prefix: "{{ project_directory }}/openresty"
  openresty_configure_options: >-
    --with-luajit
    --prefix={{ openresty_prefix }}
    --user={{ openresty_user }}
    --group={{ openresty_group }}
  openresty_logrotate_file: /etc/logrotate.d/nginx
  openresty_service_file: /etc/rc.d/init.d/nginx
  openresty_service_enabled: yes
  openresty_lualib_repository: https://github.com/ojos/lua-library.git
  openresty_worker_processes: auto
  openresty_worker_rlimit_nofile: 4096
  openresty_worker_connections: 1024
  openresty_keepalive_timeout: 65
  openresty_sendfile: "on"
  openresty_multi_accept: "on"
  openresty_resolver: 8.8.8.8
  openresty_resolver_valid: 300s
  openresty_resolver_timeout: 10s
  openresty_server_tokens: "off"
  openresty_default_type: application/octet-stream
  openresty_client_max_body_size: 4G
  openresty_lua_check_client_abort: "on"
  openresty_lua_code_cache: "on"
  openresty_nginx_repository: ''
  openresty_awslogs_settings: |+
    [{{ openresty_prefix }}/nginx/logs/access.log]
    datetime_format = %d/%b/%Y:%H:%M:%S %z
    file = {{ openresty_prefix }}/nginx/logs/access.log
    buffer_duration = 5000
    log_stream_name = {instance_id}
    initial_position = start_of_file
    log_group_name = {{ openresty_prefix }}/nginx/logs/access.log

    [{{ openresty_prefix }}/nginx/logs/error.log]
    datetime_format = %d/%b/%Y:%H:%M:%S %z
    file = {{ openresty_prefix }}/nginx/logs/error.log
    buffer_duration = 5000
    log_stream_name = {instance_id}
    initial_position = start_of_file
    log_group_name = {{ openresty_prefix }}/nginx/logs/error.log
  openresty_envrc_directory: "{{ direnv_envrc_directory }}"
  openresty_environment_variables:
    - value: "# nginx"
      regexp: "^# nginx$"
    - value: "export NGINX_HOME={{ nginx_home_dir.stdout }}"
      regexp: "^export NGINX_HOME"
    - value: "export NGINX_PID=$NGINX_HOME/logs/nginx.pid"
      regexp: "^export NGINX_PID"
    - value: |
        export PATH=$NGINX_HOME/sbin:$PATH

      regexp: PATH=\$NGINX_HOME/sbin\:\$PATH

